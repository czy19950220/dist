webpackJsonp([18],{"8HN0":function(t,e){},VBOb:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("Dd8w"),a=o.n(s),n=o("mtWM"),r=o.n(n),i=o("Au9i"),c=o("NYxO"),l={name:"NovelSearchDev",data:function(){return{query:"大王",searchResult:[]}},computed:a()({},Object(c.c)(["bookDetail"])),methods:a()({},Object(c.b)(["bookDetailChange"]),{url2Real:function(t){return-1===t.search(/agent/i)?"http://api.zhuishushenqi.com"+t:decodeURIComponent(t.replace(/\/agent\//,""))},getSearch:function(){var t=this,e="/api/book/fuzzy-search?query="+this.query+"&start=0&limit=20";r.a.get(e).then(function(e){var o=e.data.books;if(0==o.length){var s=Object(i.Toast)("没找到");setTimeout(function(){s.close()},2e3)}else o.map(function(e){e.cover=e.cover?t.url2Real(e.cover):"../assets/imgs/err.png",e.shortIntro=e.shortIntro.length>30?e.shortIntro.substr(0,30)+".....":e.shortIntro}),console.log(o),t.searchResult=e.data.books})},toBook:function(t){this.bookDetailChange(t._id),this.$router.push("/NovelDev/NovelDetailDev")}}),mounted:function(){this.getSearch()},created:function(){var t=this;this.$mui.back=function(){t.$router.push("/NovelDev/NovelBookshelfDev")}}},u={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"book-search"},[o("mt-header",{attrs:{title:"搜索小说"}},[o("router-link",{attrs:{slot:"left",to:"/NovelDev/NovelBookshelfDev"},slot:"left"},[o("mt-button",{attrs:{icon:"back"}},[t._v("返回")])],1)],1),t._v(" "),o("div",{staticClass:"book-search-main"},[o("el-row",{staticStyle:{"margin-top":"10px"}},[o("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getSearch(e):null}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.getSearch()}}},[t._v("搜索")])],1),t._v(" "),o("div",{staticClass:"search-book-result"},t._l(t.searchResult,function(e){return o("div",{staticClass:"result-detail",on:{click:function(o){t.toBook(e)}}},[o("img",{staticClass:"book-result-img",attrs:{src:e.cover,alt:e.title}}),t._v(" "),o("div",{staticClass:"book-title"},[t._v(t._s(e.title))]),t._v(" "),o("div",{staticClass:"book-shortIntro"},[t._v(t._s(e.shortIntro))]),t._v(" "),o("div",{staticClass:"author-and-cat"},[o("span",{staticClass:"mui-icon mui-icon mui-icon-contact"}),t._v("\n          "+t._s(e.author)+"\n          "),o("mt-badge",{attrs:{size:"small"}},[t._v(t._s(e.cat))])],1)])}))],1)],1)},staticRenderFns:[]};var v=o("VU/8")(l,u,!1,function(t){o("8HN0")},"data-v-a866b756",null);e.default=v.exports}});