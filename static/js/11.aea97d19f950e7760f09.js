webpackJsonp([11],{FkEP:function(o,t,e){"use strict";(function(o){var a=e("c/Tr"),i=e.n(a),n=e("mvHQ"),r=e.n(n),s=e("Dd8w"),d=e.n(s),l=e("mtWM"),k=e.n(l),c=e("Au9i"),b=(e.n(c),e("NYxO"));t.a={name:"NovelDetailDev",data:function(){return{book:{},addRemove:"添加书架",bookAdd:{}}},computed:d()({},Object(b.c)(["bookDetail"])),methods:{hasBook:function(){for(var o=JSON.parse(localStorage.getItem("czyBooks")),t=o.books.length,e=0,a=0;a<t;a++)o.books[a]._id==this.bookAdd._id&&(e+=1);this.addRemove=e>0?"移除书架":"添加书架"},addBook:function(){for(var t=this,e=JSON.parse(localStorage.getItem("czyBooks")),a=e.books.length,i=0,n=0;n<a;n++)e.books[n]._id==t.bookAdd._id&&(i+=1);if(i>0){t.addRemove="添加书架";var s=o.grep(e.books,function(o,e){return o._id==t.bookAdd._id},!0);e.books=s}else e.books.push(t.bookAdd),t.addRemove="移除书架";e=r()(e),localStorage.removeItem("czyBooks"),localStorage.setItem("czyBooks",e),console.log(JSON.parse(localStorage.getItem("czyBooks")))},readBook:function(){this.$router.push("/NovelDev/NovelRead")},url2Real:function(o){return-1===o.search(/agent/i)?"http://api.zhuishushenqi.com"+o:decodeURIComponent(o.replace(/\/agent\//,""))},wordCount2Str:function(o){if(i()(String(o)).length>4){var t=i()(String(o));t.length-=4,o=t.join("")+"万"}return o<=0&&(o=0),o+"字"},getBook:function(){var o=this,t="/api/book/"+this.bookDetail;k.a.get(t).then(function(t){o.book=t.data,o.book.cover=o.book.cover?o.url2Real(o.book.cover):"../assets/imgs/err.png",o.book.wordCount=o.book.wordCount?o.wordCount2Str(o.book.wordCount):0,o.bookAdd.cover=o.book.cover,o.bookAdd.wordCount=o.book.wordCount,o.bookAdd._id=o.book._id,o.bookAdd.title=o.book.title,o.bookAdd.lastReadChapter="还没阅读",o.bookAdd.lastReadChapterIndex=0,o.hasBook()})}},mounted:function(){this.getBook()},created:function(){}}}).call(t,e("7t+N"))},RJ7d:function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("FkEP"),i={render:function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",{staticClass:"book-detail"},[e("mt-header",{attrs:{title:""+o.book.title}},[e("router-link",{attrs:{slot:"left",to:"/NovelDev/NovelBookshelfDev"},slot:"left"},[e("mt-button",{attrs:{icon:"back"}},[o._v("返回")])],1)],1),o._v(" "),e("div",{staticClass:"book-detail-main"},[e("img",{attrs:{src:o.book.cover,alt:o.book.title}}),o._v(" "),e("div",{staticClass:"book-title"},[o._v(o._s(o.book.title))]),o._v(" "),e("div",{staticClass:"book-title2 book-title"},[o._v(o._s(o.book.author)+" | "+o._s(o.book.cat)+" | "+o._s(o.book.wordCount))]),o._v(" "),e("div",{staticClass:"book-title book-title3"},[o._v(o._s(o.book.lastChapter))]),o._v(" "),e("div",{staticClass:"book-title book-title3"},[o._v(o._s(o.book.latelyFollower)+"在追")]),o._v(" "),e("div",{staticStyle:{width:"100%",float:"left","text-align":"left","text-indent":"2em","margin-top":"10px"}},[o._v("\n      "+o._s(o.book.longIntro)+"\n    ")]),o._v(" "),e("div",{staticStyle:{width:"100%",float:"left"}},[e("br"),o._v(" "),e("mt-button",{attrs:{size:"large",type:"primary"},nativeOn:{click:function(t){return o.addBook(t)}}},[o._v(o._s(o.addRemove))]),o._v(" "),e("br"),o._v(" "),e("mt-button",{attrs:{size:"large"},nativeOn:{click:function(t){return o.readBook(t)}}},[o._v("开始阅读")])],1)])],1)},staticRenderFns:[]};var n=function(o){e("VMH8")},r=e("VU/8")(a.a,i,!1,n,"data-v-3ece924d",null);t.default=r.exports},VMH8:function(o,t){}});