webpackJsonp([26],{ijKs:function(t,i){},sYIo:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s("Zrlr"),h=s.n(e),n=s("wxAW"),r=s.n(n),a={name:"CanvasFlappyBirdEs6",data:function(){return{}},mounted:function(){var t,i,s,e,n,a,c;t=function(){function t(){h()(this,t),this.fno=0,this.canvas=document.getElementById(a.id),this.ctx=this.canvas.getContext("2d"),this.RjsonUrl=a.Rjson,this.init();var i=this;this.loadAllResource(function(){i.start()})}return r()(t,[{key:"init",value:function(){var t=document.documentElement.clientWidth,i=document.documentElement.clientHeight;t>414?t=414:t<320&&(t=320),i>736?i=736:i<500&&(i=500),this.canvas.width=t,this.canvas.height=i}},{key:"loadAllResource",value:function(t){this.R={};var i=0,s=this,e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState)for(var h=JSON.parse(e.responseText),n=0;n<h.imgs.length;n++)s.R[h.imgs[n].name]=new Image,s.R[h.imgs[n].name].src=h.imgs[n].url,s.R[h.imgs[n].name].onload=function(){i++,s.ctx.clearRect(0,0,s.canvas.width,s.canvas.height),s.ctx.font="20px 宋体",s.ctx.fillText("正在加载第"+i+"张",100,100),i==h.imgs.length&&(console.log("加载完毕"),t())}},e.open("get",this.RjsonUrl,!0),e.send(null)}},{key:"start",value:function(){var t=this;this.background=new i,this.land=new s,this.bird=new n,this.score=0,t.bird.birdFly(),this.pipeArr=[],this.timer=setInterval(function(){t.fno++,t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.background.update(),t.background.render(),t.land.update(),t.land.render();for(var i=0;i<t.pipeArr.length;i++)t.pipeArr[i]&&t.pipeArr[i].update(),t.pipeArr[i]&&t.pipeArr[i].render();t.fno%100==0&&new e,t.bird.update(),t.bird.render();for(var s=t.score.toString().length,h=0;h<s;h++)t.ctx.drawImage(t.R["number"+t.score.toString().charAt(h)],t.canvas.width/2-s/2*34+34*h,100);c.ctx.fillStyle="#fff",t.ctx.fillText("Fno:"+t.fno,20,20)},20)}}]),t}(),i=function(){function t(){h()(this,t),this.image=c.R.bg_day,this.y=.75*c.canvas.height-396,this.w=288,this.h=512,this.x=0,this.speed=1}return r()(t,[{key:"render",value:function(){c.ctx.drawImage(this.image,this.x,this.y),c.ctx.drawImage(this.image,this.x+this.w,this.y),c.ctx.drawImage(this.image,this.x+2*this.w,this.y),c.ctx.fillStyle="#4ec0ca",c.ctx.fillRect(0,0,c.canvas.width,this.y+5),c.ctx.fillStyle="#5ee270",c.ctx.fillRect(0,this.y+this.h-5,c.canvas.width,c.canvas.height-this.y-this.h+5)}},{key:"update",value:function(){this.x-=this.speed,this.x=this.x<-this.w?0:this.x}}]),t}(),s=function(){function t(){h()(this,t),this.image=c.R.land,this.y=.78*c.canvas.height,this.x=0,this.h=112,this.speed=2,this.w=336}return r()(t,[{key:"render",value:function(){c.ctx.drawImage(this.image,this.x,this.y),c.ctx.drawImage(this.image,this.x+this.w,this.y),c.ctx.drawImage(this.image,this.x+2*this.w,this.y),c.ctx.fillStyle="#DED895",c.ctx.fillRect(0,this.y+this.h,c.canvas.width,.26*c.canvas.height-this.h)}},{key:"update",value:function(){this.x-=this.speed,this.x=this.x<-this.w?0:this.x}}]),t}(),e=function(){function t(){h()(this,t),this.h=320,this.w=52,this.pipeUp=c.R.pipe_up,this.pipeDown=c.R.pipe_down,this.allHeight=.78*c.canvas.height,this.intersperse=180,this.downHeight=100+parseInt(Math.random()*(this.h-100-60)),this.upHeight=this.allHeight-this.intersperse-this.downHeight,this.x=c.canvas.width,this.isCross=!1,c.pipeArr.push(this)}return r()(t,[{key:"render",value:function(){c.ctx.drawImage(this.pipeDown,0,this.h-this.downHeight,this.w,this.downHeight,this.x,0,this.w,this.downHeight),c.ctx.drawImage(this.pipeUp,0,0,this.w,this.upHeight,this.x,this.downHeight+this.intersperse,this.w,this.upHeight)}},{key:"update",value:function(){if(this.x-=2,c.bird.birdR>this.x&&c.bird.birdL<this.x+52&&(c.bird.birdT<this.downHeight||c.bird.birdT>this.downHeight+this.intersperse)&&clearInterval(c.timer),c.bird.birdR>this.x+52&&!this.isCross&&(c.score++,this.isCross=!0),this.x<-52)for(var t=0;t<c.pipeArr.length;t++)c.pipeArr[t]===this&&c.pipeArr.splice(t,1)}}]),t}(),n=function(){function t(){h()(this,t),this.color=parseInt(3*Math.random()),this.birdArr=[c.R["bird"+this.color+"_0"],c.R["bird"+this.color+"_1"],c.R["bird"+this.color+"_2"]],this.wingStep=0,this.x=.382*c.canvas.width-24,this.y=100,this.birdFno=0,this.d=-.4,this.fly=!1}return r()(t,[{key:"render",value:function(){c.ctx.save(),c.ctx.translate(this.x,this.y),c.ctx.rotate(this.d),c.ctx.drawImage(this.birdArr[this.wingStep],-24,-24),c.ctx.restore()}},{key:"update",value:function(){this.birdT=this.y-12,this.birdR=this.x+17,this.birdB=this.y+12,this.birdL=this.x-17;this.fly?(this.y-=.6*(20-this.birdFno),this.birdFno>20&&(this.fly=!1,this.birdFno=0)):this.y+=.005*this.birdFno,this.birdFno++,this.d+=.02,this.y+=.6*this.birdFno,c.fno%5==0&&this.wingStep++,this.wingStep=this.wingStep>2?0:this.wingStep,this.birdB>.78*c.canvas.height&&clearInterval(c.timer),this.y<24&&(this.y=24)}},{key:"birdFly",value:function(){var t=this;c.canvas.onclick=function(){t.fly=!0,t.d=-.4,t.birdFno=0},c.canvas.touchend=function(){t.fly=!0,t.d=-.4,t.birdFno=0}}}]),t}(),c=new t(a={id:"canvas-three",Rjson:"https://czy-1257069199.cos.ap-beijing.myqcloud.com/my-app/flappybird/B2.json"})},created:function(){var t=this;this.$mui.back=function(){t.$router.push("/Study/Cells")}}};var c={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{attrs:{id:"body"}},[i("canvas",{ref:"canvas",attrs:{id:"canvas-three"}})])},staticRenderFns:[]};var d=s("VU/8")(a,c,!1,function(t){s("ijKs")},"data-v-117b6ad1",null);i.default=d.exports}});