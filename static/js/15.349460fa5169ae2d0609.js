webpackJsonp([15],{oCfL:function(o,t,e){"use strict";(function(o){var n=e("c/Tr"),a=e.n(n),i=e("mvHQ"),r=e.n(i),s=e("Dd8w"),d=e.n(s),l=e("mtWM"),k=e.n(l),c=e("Au9i"),u=(e.n(c),e("NYxO"));t.a={name:"NovelDetailCurrency",data:function(){return{book:{},addRemove:"添加书架",bookAdd:{}}},computed:d()({},Object(u.c)(["bookDetail"])),methods:{hasBook:function(){for(var o=JSON.parse(localStorage.getItem("czyBooks")),t=o.books.length,e=0,n=0;n<t;n++)o.books[n]._id==this.bookAdd._id&&(e+=1);this.addRemove=e>0?"移除书架":"添加书架"},addBook:function(){for(var t=this,e=JSON.parse(localStorage.getItem("czyBooks")),n=e.books.length,a=0,i=0;i<n;i++)e.books[i]._id==t.bookAdd._id&&(a+=1);if(a>0){t.addRemove="添加书架";var s=o.grep(e.books,function(o,e){return o._id==t.bookAdd._id},!0);e.books=s}else e.books.push(t.bookAdd),t.addRemove="移除书架";e=r()(e),localStorage.removeItem("czyBooks"),localStorage.setItem("czyBooks",e)},readBook:function(){"添加书架"==this.addRemove&&this.addBook(),this.$router.push("/NovelTongYong/NovelReadTwoCurrency")},url2Real:function(o){return-1===o.search(/agent/i)?"http://api.zhuishushenqi.com"+o:decodeURIComponent(o.replace(/\/agent\//,""))},wordCount2Str:function(o){if(a()(String(o)).length>4){var t=a()(String(o));t.length-=4,o=t.join("")+"万"}return o<=0&&(o=0),o+"字"},getBook:function(){var o=this,t=this.GLOBAL.kuaYu+"http://api.zhuishushenqi.com/book/"+this.bookDetail;k.a.get(t).then(function(t){o.book=t.data,o.book.cover=o.book.cover?o.url2Real(o.book.cover):"../assets/imgs/err.png",o.book.wordCount=o.book.wordCount?o.wordCount2Str(o.book.wordCount):0,o.bookAdd.cover=o.book.cover,o.bookAdd.wordCount=o.book.wordCount,o.bookAdd._id=o.book._id,o.bookAdd.title=o.book.title,o.bookAdd.lastReadChapter="还没阅读",o.bookAdd.lastReadChapterIndex=0,o.hasBook()})}},mounted:function(){this.getBook()},created:function(){var o=this;this.$mui.back=function(){o.$router.push("/NovelTongYong/NovelBookShelfCurrency")}}}}).call(t,e("7t+N"))},pMO9:function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("oCfL"),a={render:function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",{staticClass:"book-detail"},[e("mt-header",{attrs:{title:""+o.book.title}},[e("router-link",{attrs:{slot:"left",to:"/NovelTongYong/NovelBookShelfCurrency"},slot:"left"},[e("mt-button",{attrs:{icon:"back"}},[o._v("返回")])],1)],1),o._v(" "),e("div",{staticClass:"book-detail-main"},[e("img",{attrs:{src:o.book.cover,alt:o.book.title}}),o._v(" "),e("div",{staticClass:"book-title"},[o._v(o._s(o.book.title))]),o._v(" "),e("div",{staticClass:"book-title2 book-title"},[o._v(o._s(o.book.author)+" | "+o._s(o.book.cat)+" | "+o._s(o.book.wordCount))]),o._v(" "),e("div",{staticClass:"book-title book-title3"},[o._v(o._s(o.book.lastChapter))]),o._v(" "),e("div",{staticClass:"book-title book-title3"},[o._v(o._s(o.book.latelyFollower)+"在追")]),o._v(" "),e("div",{staticStyle:{width:"100%",float:"left","text-align":"left","text-indent":"2em","margin-top":"10px"}},[o._v("\n      "+o._s(o.book.longIntro)+"\n    ")]),o._v(" "),e("div",{staticStyle:{width:"100%",float:"left"}},[e("br"),o._v(" "),e("mt-button",{attrs:{size:"large",type:"primary"},nativeOn:{click:function(t){return o.addBook(t)}}},[o._v(o._s(o.addRemove))]),o._v(" "),e("br"),o._v(" "),e("mt-button",{attrs:{size:"large"},nativeOn:{click:function(t){return o.readBook(t)}}},[o._v("开始阅读")])],1)])],1)},staticRenderFns:[]};var i=function(o){e("wo/l")},r=e("VU/8")(n.a,a,!1,i,"data-v-42f30fee",null);t.default=r.exports},"wo/l":function(o,t){}});