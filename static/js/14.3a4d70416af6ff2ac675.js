webpackJsonp([14],{"9oXt":function(t,e,o){"use strict";(function(t){var a=o("//Fk"),n=o.n(a),i=o("Zrlr"),s=o.n(i),r=o("wxAW"),l=o.n(r),c=o("BO1k"),u=o.n(c),h=o("mvHQ"),d=o.n(h),p=o("Dd8w"),g=o.n(p),m=o("mtWM"),f=o.n(m),b=o("Au9i"),v=(o.n(b),o("NYxO")),k=o("K8K/"),y=o.n(k),w=o("FolY");e.a={name:"NovelReadCurrency",components:{ParticleEffectButton:w.a},data:function(){return{showTabbar:!0,isHidden:!1,fontSlot:[{flex:1,values:["Microsoft YaHei","华文楷体","宋体","楷体","none","unset"],className:"slot1"}],fontFamily:"",preCon:{precon:!0},centerDialogVisible:!1,rangeValue:16,firstLoad:1,allLoaded:!1,bottomStatus:"",wrapperHeight:0,pickerValue:"",fullscreenLoading:!1,title:"",chapterList:[],chapterListNew:[],page:0,bodyText:"",pageVal:1,theParams:"111"}},computed:g()({},Object(v.c)(["bookDetail","myFontFamily"])),watch:{rangeValue:{handler:function(t,e){this.handleChange(t)}}},methods:{getMousePos:function(e){var o=e||window.event,a=(document.getElementById("book-read"),t("#book-read").width()),n=t("#book-read").height(),i=o.clientX,s=o.clientY;1==(parseInt(i/a*100)>25&&parseInt(i/a*100)<75&&parseInt(s/n*100)>30&&parseInt(s/n*100)<70?1:0)&&this.main_log()},theDraggabilly:function(){for(var t=document.querySelectorAll(".draggable"),e=[],o=0,a=t.length;o<a;o++){var n=t[o],i=new y.a(n,{containment:!0});e.push(i)}},main_log:function(){var t=this;this.isHidden=!this.isHidden,0==this.isHidden?this.showTabbar=!0:setTimeout(function(){t.showTabbar=!1},500)},onFontChange:function(t,e){this.fontFamily="couriernew, courier,"+e[0],console.log(this.fontFamily)},handleChange:function(t){var e=JSON.parse(localStorage.getItem("czyBooks"));e.fontSize=parseInt(t),e=d()(e),localStorage.removeItem("czyBooks"),localStorage.setItem("czyBooks",e)},bookReadIndex:function(){var t=JSON.parse(localStorage.getItem("czyBooks"));this.rangeValue=t.fontSize;for(var e=t.books.length,o=this.bookDetail,a=0,n=0;n<e;n++)t.books[n]._id==o&&(a=t.books[n].lastReadChapterIndex);this.page=a},changeBookshelf:function(){for(var t=JSON.parse(localStorage.getItem("czyBooks")),e=t.books.length,o=this.bookDetail,a=0;a<e;a++)t.books[a]._id==o&&(t.books[a].lastReadChapter=this.chapterList[this.page].title,t.books[a].lastReadChapterIndex=this.page);t=d()(t),localStorage.removeItem("czyBooks"),localStorage.setItem("czyBooks",t)},handleBottomChange:function(t){this.bottomStatus=t},loadBottom:function(){var t=this;1==this.firstLoad?(setTimeout(function(){t.$refs.loadmore.onBottomLoaded()},30),setTimeout(function(){document.getElementsByClassName("page-loadmore-wrapper")[0].scrollTop=0},31),setTimeout(function(){t.firstLoad=0},3e3)):setTimeout(function(){t.loadPrev(1)},200)},sheZhi:function(){this.centerDialogVisible=!0},openFullScreen:function(){var t=this;this.fullscreenLoading=!0,setTimeout(function(){t.fullscreenLoading=!1},500)},toChapter:function(t,e){this.allLoaded=!1,this.page=100*(this.pageVal-1)+e,this.getText(this.chapterList),this.title=t,this.$refs.drawerLayout.toggle(!1),document.getElementById("book").scrollTop=0},handleCurrentChange:function(t){this.chapterListNew=this.chapterList.slice(100*(t-1),100*t),this.pageVal=t,setTimeout(function(){document.getElementById("drawer-book").scrollTop=document.getElementsByClassName("blue-class")[0].offsetTop},50)},handleMaskClick:function(){this.$refs.drawerLayout.toggle(!1)},more:function(){this.$refs.drawerLayout.toggle()},getLink:function(t){var e=this,o=this.GLOBAL.kuaYu+"http://api.zhuishushenqi.com/toc/"+t+"?view=chapters";f.a.get(o).then(function(t){if(200==t.status){var o=t.data;e.chapterList=o.chapters,e.title=e.chapterList[e.page].title,e.chapterListNew=e.chapterList.slice(0,100),e.getText(e.chapterList)}}).catch(function(t){console.log(t),Object(b.Toast)({message:"资源没找到...",position:"bottom",duration:2e3})})},getText:function(t){var e=this;this.allLoaded=!1,this.currentPage=parseInt(this.page/100)+1,this.handleCurrentChange(this.currentPage);var o=this.GLOBAL.kuaYu+"http://chapter2.zhuishushenqi.com/chapter/"+encodeURIComponent(t[this.page].link)+"?k=2124b73d7e2e1945&t=1468223717";f.a.get(o).then(function(t){if(200==t.status){var o=t.data;if(o.ok){if(o.chapter.body.indexOf("下载最新的追书神器app阅读本作")>-1)return void Object(b.Toast)({message:"资源丢失了...",position:"bottom",duration:2e3});if(o.chapter.body.indexOf("请安装最新版追书")>-1)return void Object(b.Toast)({message:"资源丢失了...",position:"bottom",duration:2e3});e.bodyText=o.chapter.body.split("\n").join("<br>");for(var a=e.bodyText.split("<br>"),n=[],i=0;i<a.length;i++)n.push(a[i]);e.bodyText=n,e.changeBookshelf(),setTimeout(function(){document.getElementsByClassName("page-loadmore-wrapper")[0].scrollTop=0},200)}}}).catch(function(t){Object(b.Toast)({message:"资源没找到",position:"bottom",duration:2e3})})},loadPrev:function(t){this.page=this.page+t,this.page<0?(this.page=0,Object(b.Toast)({message:"已经是第一章了...",position:"bottom",duration:2e3}),this.allLoaded=!1):this.page>=this.chapterList.length?(this.page=this.chapterList.length-1,Object(b.Toast)({message:"已经是最新章了...",position:"bottom",duration:2e3}),this.allLoaded=!0):(this.getText(this.chapterList),this.title=this.chapterList[this.page].title,document.getElementsByClassName("page-loadmore-wrapper")[0].scrollTop=0,setTimeout(function(){document.getElementsByClassName("page-loadmore-wrapper")[0].scrollTop=0},100))},getNovel:function(){var t=this,e=this.GLOBAL.kuaYu+"http://api.zhuishushenqi.com/toc?view=summary&book="+this.bookDetail;f.a.get(e).then(function(e){if(200==e.status){var o=e.data,a=o.length>1?o[1]._id:o[0]._id,n=!0,i=!1,s=void 0;try{for(var r,l=u()(o);!(n=(r=l.next()).done);n=!0){var c=r.value;if("my176"===c.source){a=c._id;break}}}catch(t){i=!0,s=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw s}}t.getLink(a)}Object(b.Toast)({message:"加载成功",position:"bottom",duration:2e3})}).catch(function(t){Object(b.Toast)({message:"资源没找到...",position:"bottom",duration:2e3})})},novel:function(){var t=this;new(function(){function e(){s()(this,e),this.sourceId=t.bookDetail,this.getNovel2().then(this.getLink2).then(this.getText2).then(function(t){}).catch(function(t){console.log(t)})}return l()(e,[{key:"getNovel2",value:function(){var e=this;return new n.a(function(o,a){f.a.get(t.GLOBAL.kuaYu+"http://api.zhuishushenqi.com/toc?view=summary&book="+e.sourceId).then(function(e){if(200==e.status){var a=e.data,n=a.length>1?a[1]._id:a[0]._id,i=!0,s=!1,r=void 0;try{for(var l,c=u()(a);!(i=(l=c.next()).done);i=!0){var h=l.value;if("my176"===h.source){n=h._id;break}}}catch(t){s=!0,r=t}finally{try{!i&&c.return&&c.return()}finally{if(s)throw r}}t.theParams=n,o()}}).catch(function(t){Object(b.Toast)({message:"资源没找到...",position:"bottom",duration:2e3})})})}},{key:"getLink2",value:function(){return new n.a(function(e,o){t.theParams;var a=t.GLOBAL.kuaYu+"http://api.zhuishushenqi.com/toc/"+t.theParams+"?view=chapters";f.a.get(a).then(function(o){if(200==o.status){var a=o.data;t.chapterList=a.chapters,t.title=t.chapterList[t.page].title,t.chapterListNew=t.chapterList.slice(0,100),e()}}).catch(function(t){console.log(t),Object(b.Toast)({message:"资源没找到...",position:"bottom",duration:2e3})})})}},{key:"getText2",value:function(){return new n.a(function(e,o){var a=t.chapterList;t.currentPage=parseInt(t.page/100)+1,t.handleCurrentChange(t.currentPage);var n=t.GLOBAL.kuaYu+"http://chapter2.zhuishushenqi.com/chapter/"+encodeURIComponent(a[t.page].link)+"?k=2124b73d7e2e1945&t=1468223717";f.a.get(n).then(function(e){if(200==e.status){var o=e.data;if(o.ok){if(o.chapter.body.indexOf("下载最新的追书神器app阅读本作")>-1)return void Object(b.Toast)({message:"资源丢失了...",position:"bottom",duration:2e3});if(o.chapter.body.indexOf("请安装最新版追书")>-1)return void Object(b.Toast)({message:"资源丢失了...",position:"bottom",duration:2e3});t.bodyText=o.chapter.body.split("\n").join("<br>");for(var a=t.bodyText.split("<br>"),n=[],i=0;i<a.length;i++)n.push(a[i]);t.bodyText=n,t.changeBookshelf(),setTimeout(function(){document.getElementsByClassName("page-loadmore-wrapper")[0].scrollTop=0},200)}}}).catch(function(t){Object(b.Toast)({message:"资源没找到",position:"bottom",duration:2e3})})})}}]),e}())}},created:function(){this.novel();var t=this;this.$mui.back=function(){t.$router.push("/NovelTongYong/NovelBookShelfCurrency")}},mounted:function(){this.bookReadIndex(),this.wrapperHeight=document.documentElement.clientHeight-this.$refs.wrapper.getBoundingClientRect().top},beforeRouteLeave:function(t,e,o){this.firstLoad=1,o()}}}).call(e,o("7t+N"))},Yd88:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("9oXt"),n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"book-read container",attrs:{id:"book-read"},on:{click:t.getMousePos}},[o("el-dialog",{attrs:{title:"设置",visible:t.centerDialogVisible,width:"90%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[o("span",[t._v("字体大小:"+t._s(t.rangeValue)+"像素（px）")]),t._v(" "),o("mt-range",{attrs:{min:12,max:48,step:2,"bar-height":5},model:{value:t.rangeValue,callback:function(e){t.rangeValue=e},expression:"rangeValue"}}),t._v(" "),o("router-link",{attrs:{to:"/NovelTongYong/NovelReadCurrency"}},[o("el-button",[t._v("滚动阅读")])],1),t._v(" "),o("router-link",{attrs:{to:"/NovelTongYong/NovelReadTwoCurrency"}},[o("el-button",[t._v("翻页阅读")])],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1),t._v(" "),o("vue-drawer-layout",{ref:"drawerLayout",attrs:{reverse:!0},on:{"mask-click":t.handleMaskClick}},[o("div",{staticClass:"drawer-book",attrs:{slot:"drawer",id:"drawer-book"},slot:"drawer"},[o("div",{staticClass:"block"},[o("el-pagination",{attrs:{background:"","current-page":1,"page-size":100,"pager-count":5,layout:"prev, pager, next",total:t.chapterList.length},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),t._l(t.chapterListNew,function(e,a){return o("div",{key:a,class:a+100*(t.pageVal-1)==t.page?"blue-class":"red-class",on:{click:function(o){t.toChapter(e.title,a)}}},[o("mt-cell",{attrs:{title:e.title}})],1)})],2),t._v(" "),o("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[o("mt-header",{attrs:{title:t.title}},[o("router-link",{attrs:{slot:"left",to:"/NovelTongYong/NovelBookShelfCurrency"},slot:"left"},[o("mt-button",{attrs:{icon:"back"}},[t._v("返回")])],1),t._v(" "),o("mt-button",{attrs:{slot:"right",icon:"more"},on:{click:t.more},slot:"right"})],1),t._v(" "),o("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"book-read-main",attrs:{id:"book"}},[o("div",{staticClass:"page-loadmore"},[o("div",{ref:"wrapper",staticClass:"page-loadmore-wrapper",style:{height:t.wrapperHeight+"px"}},[o("mt-loadmore",{ref:"loadmore",attrs:{"bottom-method":t.loadBottom,"bottom-all-loaded":t.allLoaded},on:{"bottom-status-change":t.handleBottomChange}},[t._l(t.bodyText,function(e){return o("div",{class:t.preCon,style:{fontSize:t.rangeValue+"px ",fontFamily:t.myFontFamily},domProps:{innerHTML:t._s(e)}})}),t._v(" "),o("div",{staticClass:"mint-loadmore-bottom",attrs:{slot:"bottom"},slot:"bottom"},[o("span",{directives:[{name:"show",rawName:"v-show",value:"loading"!==t.bottomStatus,expression:"bottomStatus !== 'loading'"}],class:{"is-rotate":"drop"===t.bottomStatus}},[t._v("↑")]),t._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.bottomStatus,expression:"bottomStatus === 'loading'"}]},[o("mt-spinner",{attrs:{type:"snake"}})],1)])],2)],1)])]),t._v(" "),o("mt-tabbar",{directives:[{name:"show",rawName:"v-show",value:t.showTabbar,expression:"showTabbar"}],staticStyle:{background:"none"}},[o("particle-effect-button",{attrs:{hidden:t.isHidden,color:"rgb(50, 186, 250)",duration:500,type:"triangle",drawStyle:"stroke"}},[o("mt-tab-item",{staticStyle:{width:"100%"},attrs:{id:"上一章"}},[o("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",icon:"el-icon-arrow-left"},on:{click:function(e){t.loadPrev(-1)}}},[t._v("上一章")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.sheZhi()}}},[t._v("设置")]),t._v(" "),o("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){t.loadPrev(1)}}},[t._v("下一章"),o("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1)],1)],1)])],1)},staticRenderFns:[]};var i=function(t){o("t7aS")},s=o("VU/8")(a.a,n,!1,i,"data-v-24be4d4c",null);e.default=s.exports},t7aS:function(t,e){}});